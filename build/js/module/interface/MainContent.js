define(["require","underscore","backbone","mustache","lib/BrowserUtil","module/component/StatusCodeManager","module/interface/LeftCanvas","module/interface/HomePage","module/interface/FileManagePage","module/interface/CloudModelPage","module/interface/SettingPage","module/interface/HelpPage","module/interface/LogoutPage","module/interface/kit/AlertBox","module/GlobalVar","text!../../../html/MainContent.html","text!../../../html/WebCamera.html"],function(e){"use strict";function g(){this._activePage=null,this._leftCanvas=null,this._pageSet=[],this._init()}var t=e("underscore"),n=e("backbone"),r=e("mustache"),i=e("lib/BrowserUtil"),s=e("module/component/StatusCodeManager"),o=e("module/interface/LeftCanvas"),u=e("module/interface/HomePage"),a=e("module/interface/FileManagePage"),f=e("module/interface/CloudModelPage"),l=e("module/interface/SettingPage"),c=e("module/interface/HelpPage"),h=e("module/interface/LogoutPage"),p=e("module/interface/kit/AlertBox"),d=e("module/GlobalVar"),v=e("text!../../../html/MainContent.html"),m=e("text!../../../html/WebCamera.html");return t.extend(g.prototype,n.Events),g.prototype._init=function(){this._initPage(),this._initCentreContent(),this._initLeftCanvas(),this._initEvent(),this._initTimer()},g.prototype._initLeftCanvas=function(){this._leftCanvas=new o},g.prototype._initCentreContent=function(){this._pageSet.push(new u),this._pageSet.push(new a),this._pageSet.push(new f),this._pageSet.push(new l),this._pageSet.push(new c),this._pageSet.push(new h)},g.prototype._initPage=function(){d.isMobile=i.isMobile();var e=d.language.MainContent;$("#content").html(r.render(v,{PageCameraText:e.Camera,TakePhotoText:e.TakePhoto,StopImmediatelyText:e.StopImmediately,leftCanvasContent:o.prototype.getContent(),centreContent:[u.prototype.getContent(),a.prototype.getContent(),f.prototype.getContent(),l.prototype.getContent(),c.prototype.getContent(),h.prototype.getContent()]}))},g.prototype._initEvent=function(){this._bindEvent(),this.on("activePage",function(e){for(var t=0,n=this._pageSet.length;t<n;++t){if(this._pageSet[t].INDEX===e){this._pageSet[t].trigger("active"),this._activePage=this._pageSet[t];continue}this._pageSet[t].trigger("deactive")}})},g.prototype._bindEvent=function(){$("#closeModalButton").click(function(e){$("#mainModalContent").html("")})},g.prototype._initTimer=function(){this._activePage=this._pageSet[0]},g});