define(["require","mustache","lib/InheritHelper","module/agent/DiaryAgent","module/GlobalVar","module/component/DiaryManager","module/interface/CentreContentPage","text!../../../html/DiariesPage.html","text!../../../html/diariesTable/tableBody.html"],function(e){"use strict";function l(){this.superClass(),this._bindEvent()}var t=13,n=e("mustache"),r=e("lib/InheritHelper"),i=e("module/agent/DiaryAgent"),s=e("module/GlobalVar"),o=e("module/component/DiaryManager"),u=e("module/interface/CentreContentPage"),a=e("text!../../../html/DiariesPage.html"),f=e("text!../../../html/diariesTable/tableBody.html");return r.inheritPrototype(l,u),l.prototype.INDEX=2,l.prototype._bindEvent=function(){this._bindClickTitleEvent(),$("#searchDiary").click(function(e){this._onSearchDiaries()}.bind(this)),$("#diaryKeyword").keypress(function(e){if(t!==e.keyCode)return;this._onSearchDiaries()}.bind(this))},l.prototype._onSearchDiaries=function(){var e=$("#diaryKeyword").val(),t=o.searchDiary(e,locale);$("#diaresTableBody").html(n.render(f,{tableItems:t})),this._bindClickTitleEvent()},l.prototype._bindClickTitleEvent=function(){var e=this;$(".diaryTitle").click(function(t){var n=$(this).data("index");i.queryDiary(n,function(e){$("#mainModalContent").html(e),$("#mainModal").foundation("open")},function(t){e.notifyErrorMessage(t)})})},l.prototype.getContent=function(){var e=s.language.DiariesPage,t=o.getList(locale);return n.render(a,{TitleText:e.Title,DateText:e.Date,tableBody:n.render(f,{tableItems:t})})},l});