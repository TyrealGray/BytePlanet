<h2>module programming in UE4</h2>

<div class="diaryContext">
    <p>I tried to find the way about module programming in UE4,but many of them is discribing how to program a plugin in UE4.Then I tried to remember how my manager did about,lucky I found out it's only little different with plugin.Time to share my loot</p>
    <hr>
    <p>At first ,you need to create a empty C++ UE4 project,here is my project name:<b>MainModule</b>. Then, go to project dir at<b>MainModule\Source\</b> build a <b>TestModule</b>folder</p>
    <figure class="tmblr-full"><img src="http://65.media.tumblr.com/0f7fb65dc46f48a15500776af9aeeb92/tumblr_inline_np63cpyvd51tuwv4e_500.png" alt="image"></figure>
    <p>click in<b>TestModule</b>folder then build <b>Public</b> and <b>Private</b>folder with <b>TestModule.Build.cs</b></p>
    <figure class="tmblr-full"><img src="http://66.media.tumblr.com/169f3a8ce3004851fd535a88386c6147/tumblr_inline_np688kC80b1tuwv4e_500.png" alt="image"></figure>
    <p>next ,in the <b>Public</b>folder,create <b>TestModule.h</b>,and here is the context:</p>
    <ol>
        <li><b>#pragma once<br></b></li>
        <li><b>#include “ModuleManager.h”<br></b></li>
        <li><b>class TestModuleImpl : public IModuleInterface<br></b></li>
        <li><b>{<br></b></li>
        <li><b>public:<br></b></li>
        <li><b>&nbsp; &nbsp;/** IModuleInterface implementation */<br></b></li>
        <li><b>&nbsp; &nbsp;void StartupModule();<br></b></li>
        <li><b>&nbsp; &nbsp;void ShutdownModule();</b></li>
        <li><b>};</b></li>
    </ol>
    <hr>
    <p>and in<b>Private</b>folder,create <b>TestModule.cpp</b>,context:</p>
    <ol>
        <li><b>#include “TestModule.h”<br></b></li>
        <li><b>void TestModuleImpl::StartupModule()<br></b></li>
        <li><b>{<br></b></li>
        <li><b>}<br></b></li>
        <li><b>void TestModuleImpl::ShutdownModule()<br></b></li>
        <li><b>{<br></b></li>
        <li><b>}<br></b></li>
        <li><b>IMPLEMENT_GAME_MODULE(TestModuleImpl, 

<b>TestModule</b>)</b><br></li>
    </ol>
    <hr>
    <p>

        and in<b>Private</b>folder,create <b>TestModulePrivatePCH.h</b>,you can use this head file to include common UE4 head file,such like:

        <br></p>
    <ol>
        <li><b>#pragma once</b><br></li>
        <li><b>#include “Engine.h”</b><br></li>
    </ol>
    <hr>
    <p>

        and then,looking at<b>TestModule.Build.cs</b>and rewrite :</p>
    <ol>
        <li><b>using UnrealBuildTool;<br></b></li>
        <li><b>public class TestModule : ModuleRules<br></b></li>
        <li><b>{<br></b></li>
        <li><b>&nbsp; &nbsp;public TestModule(TargetInfo Target)<br></b></li>
        <li><b>{<br></b></li>
        <li><b>PublicDependencyModuleNames.AddRange(new string[] { “Core”, “CoreUObject”, “Engine”, “InputCore” });<br></b></li>
        <li><b><br></b></li>
        <li><b>PrivateIncludePaths.AddRange(new string[] { “TestModule/Private” });<br></b></li>
        <li><b>&nbsp; &nbsp; &nbsp; &nbsp;PublicIncludePaths.AddRange(new string[] { “TestModule/Public” });<br></b></li>
        <li><b>}<br></b></li>
        <li><b>}</b><br></li>
    </ol>
    <hr>
    <p>edit both codes in <b>MainModule.Target.cs</b> and <b>MainModuleEditor.Target.cs</b> </p>
    <ol>
        <li><b>OutExtraModuleNames.AddRange( new string[] { “MainModule” } );</b><br></li>
    </ol>
    <p>to</p>
    <ol>
        <li><b>OutExtraModuleNames.AddRange( new string[] { “MainModule”,“TestModule” } );</b><br></li>
    </ol>
    <p>then edit <b>MainModule.uproject</b> which in <b>“Module”</b>code block:</p>
    <ol>
        <li><b>“Modules”: [</b><br></li>
        <li><b>{</b><br></li>
        <li><b>“Name”: “MainModule”,</b><br></li>
        <li><b>“Type”: “Runtime”,</b><br></li>
        <li><b>“LoadingPhase”: “Default”,</b><br></li>
        <li><b>“AdditionalDependencies”: [</b><br></li>
        <li><b>“Engine”</b><br></li>
        <li><b>]</b><br></li>
        <li><b>},</b><br></li>
        <li><b>{</b><br></li>
        <li><b>“Name”: “TestModule”,</b><br></li>
        <li><b>“Type”: “Runtime”,</b><br></li>
        <li><b>“LoadingPhase”: “PreDefault”</b></li>
        <li><b>}</b><br></li>
        <li><b>]</b><br></li>
    </ol>
    <p>at last,open 

        <b>MainModule.uproject</b>and refresh <b>vs</b> code project,we might have this structure</p>
    <figure class="tmblr-full"><img src="http://67.media.tumblr.com/eeb38940a9a0eaca3c26240055da7f49/tumblr_inline_np68z42jwv1tuwv4e_400.png" alt="image"></figure>
    <p>now,when you use <b>editor</b> adding <b>C++</b>classes,you would see something like this:</p>
    <figure class="tmblr-full"><img src="http://67.media.tumblr.com/f563ea854d3fd55a9160d58d65928169/tumblr_inline_np690mewyF1tuwv4e_500.png" alt="image"></figure>
    <hr>
    <p>now you can use and move <b>TestModule</b>to any UE4 vs project!</p>
    <p><br></p>
    <p>If you have any problem ,just tell me!</p>
</div>