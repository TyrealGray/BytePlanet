var PORT=3e3,http=require("http"),url=require("url"),fs=require("fs"),path=require("path"),dir=path.dirname(fs.realpathSync(__filename)),localFileType={css:"text/css",gif:"image/gif",html:"text/html",ico:"image/x-icon",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",pdf:"application/pdf",png:"image/png",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tiff:"image/tiff",txt:"text/plain",wav:"audio/x-wav",wma:"audio/x-ms-wma",wmv:"video/x-ms-wmv",xml:"text/xml"},server=http.createServer(function(e,t){var n=url.parse(e.url).pathname;console.log("Request for "+n+" received.");if(n=="/"){t.writeHead(200,{"Content-Type":"text/html"}),fs.createReadStream(dir+"/index.html").pipe(t);return}var r=path.extname(n);r=r?r.slice(1):"unknown",fs.exists(n.substr(1),function(e){e?fs.readFile(n.substr(1),"binary",function(e,n){if(e)t.writeHead(500,{"Content-Type":"text/plain"}),t.end(e);else{var i=localFileType[r]||"text/plain";t.writeHead(200,{"Content-Type":i}),t.write(n,"binary"),t.end()}}):(t.writeHead(404,{"Content-Type":"text/plain"}),t.write("This request URL "+n+" was not found on this server."),t.end())})});server.listen(PORT),console.log("Server runing at port: "+PORT+".");